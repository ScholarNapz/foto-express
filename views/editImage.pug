extends layout

block content
  section.section-image-view.container-small.flex-col.pad-hor
    a(href=`/users/profile/${image.username}`)
      h3 #{image.username}
    .image-display
      img(src=`${image.location}` alt=`${image.name}`)
    .details-container.flex-col
      .flex-col
        .flex-row.flex-gap
          h5(style='align-self:flex-start') Description
          form.flex-col( style='flex-grow: 1' method='post', action=`/images/edit/${image.name}/description/`) 
            textarea.description-box(name="description" id='description')
              != image.description
            button.btn.btn-fir-full(type='submit' name='submit' value='') Save

      .flex-col
        .flex-row.flex-gap
          h5(style='align-self:flex-start; padding:10px') Tags
          .flex-col
            .search-bar
                  form(method='post', action=`/images/edit/${image.name}/addtag/`)
                    input#addtag(type='text' name='addtag' placeholder='Add Tag')
                    button(type='submit' name='submit' value='') Add
            if image.tags
              .tags-container
                each tag, i in image.tags
                  a.btn.btn-margin.btn-medSlate-full(href=`/images/edit/${image.name}/removetag/${tag}`) #{tag}
      .flex-col
        .flex-row.flex-gap 
          h5(style='align-self:flex-start; padding:10px') Collections
          .flex-col
            .search-bar
              form(method='post', action=`/images/edit/${image.name}/addcollection/`)
                input#addcollection(type='text' name='addcollection' placeholder='Add Collection')
                button(type='submit' name='submit' value='') Add
            
            if image.collections
              .tags-container
                each collection, i in image.collections  
                  a.btn.btn-medSlate-full(href=`/images/edit/${image.name}/removecollection/${collection}`) #{collection}

      form(action=`/images/remove/${image.name}`, method='post', enctype='multipart/form-data')
        .form-buttons
            button#login.btn.btn-margin.btn-rustic-full(type='submit' name='submit' value='remove') Delete Image
    //- script(src="/ckeditor/ckeditor.js")
    //- script 
    //-   | CKEDITOR.replace('description')
